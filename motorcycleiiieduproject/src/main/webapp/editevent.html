<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>編輯活動頁面</title>
<link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"/>
	
	<style type="text/css">
		td input, td select { margin-bottom: 1%;}
	</style>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	
	<script src="js/chat.js"></script>
	<script src="js/effect.js"></script>
	<script src="js/include.js"></script>
	
	<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script><!-- chart -->
	<link rel="stylesheet" type="text/css" href="css/sb-admin.min.css"/><!-- sidebar style -->
	
	<script src="https://cdn.ckeditor.com/ckeditor5/11.1.1/inline/ckeditor.js"></script>
</head>
<body id="page-top">

    <nav class="navbar navbar-expand navbar-dark bg-dark static-top">

      <a class="navbar-brand mr-1" href="administrator.html">後台管理</a>

      <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
        <i class="fas fa-bars"></i>
      </button>
      
      <script type="text/javascript">
      !function(t){"use strict";t("#sidebarToggle").click(
	  			function(e) {
	  				e.preventDefault(), t("body").toggleClass("sidebar-toggled"),
	  						t(".sidebar").toggleClass("toggled")
	  			}), t("body.fixed-nav .sidebar").on(
	  			"mousewheel DOMMouseScroll wheel", function(e) {
	  				if (768 < $window.width()) {
	  					var o = e.originalEvent, t = o.wheelDelta || -o.detail;
	  					this.scrollTop += 30 * (t < 0 ? 1 : -1), e.preventDefault()
	  				}
	  			}), t(document).scroll(
	  			function() {
	  				100 < t(this).scrollTop() ? t(".scroll-to-top").fadeIn() : t(".scroll-to-top").fadeOut()
	  			}), t(document).on("click", "a.scroll-to-top", function(e) {
	  				var o = t(this);
	  				t("html, body").stop().animate({
	  					scrollTop : t(o.attr("href")).offset().top
	  				}, 1e3, "easeInOutExpo"),e.preventDefault()})}(jQuery);
	  </script>
      
      <!-- Navbar Search -->
      <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="搜尋..." aria-label="搜尋" aria-describedby="basic-addon2">
          <div class="input-group-append">
            <button class="btn btn-secondary" type="button">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </form>

      <!-- Navbar -->
      <ul class="navbar-nav ml-auto ml-md-0">
        <li class="nav-item dropdown no-arrow mx-1">
          <a class="nav-link dropdown-toggle" href="#" id="replymsg" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-bell fa-fw"></i>
            <span class='badge badge-danger' id='newAlert'>9+</span>
          </a>
            <script type="text/javascript">
            $("#replymsg").on("click",function(){
    	  		$("#chatbox").removeClass("d-none");
    	  	});
            </script>
        <li class="nav-item dropdown no-arrow">
          <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-user-circle fa-fw fa-lg"></i>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">登出</a>
          </div>
        </li>
      </ul>

    </nav>

    <div id="wrapper">
		<!-- Sidebar -->
      <ul class="sidebar navbar-nav"></ul>
      <script type="text/javascript">
      	$('.sidebar').load("sidebarAdmin.html");
      </script>

      <div id="content-wrapper">
      	<div class="container-fluid">
	      		<div id="demo" class="carousel slide cke4-inline" data-ride="carousel">
					<ul class="carousel-indicators">
						<li data-target="#demo" data-slide-to="0" class="active"></li>
						<li data-target="#demo" data-slide-to="1"></li>
						<li data-target="#demo" data-slide-to="2"></li>
					</ul>
					<div class="carousel-inner">
						<div class="carousel-item active">
							<img id="carousel_1" width="100%">
							<div class="carousel-caption edit" id="editor1">
 								<h2>台北 Taipei</h2>
 								<p>We had such a great time in Taipei!</p>
							</div>
						</div>
						<div class="carousel-item">
							<img id="carousel_2" width="100%">
							<div class="carousel-caption edit" id="editor2">
								<h2>台中 Taichung</h2>
								<p>Thank you, Taichung!</p>
							</div>
						</div>
						<div class="carousel-item">
							<img id="carousel_3" width="100%">
							<div class="carousel-caption edit" id="editor3">
								<h2>台南 Tainan</h2>
 								<p>We love the Big Apple!</p>
							</div>
						</div>
					</div>
					<a class="carousel-control-prev" href="#demo" data-slide="prev"> <span class="carousel-control-prev-icon"></span></a>
					<a class="carousel-control-next" href="#demo" data-slide="next"> <span class="carousel-control-next-icon"></span></a>
				</div>
				
				<div class="col-md-12 text-center"><h1 style="margin: 5% 0;"><b>活動訊息</b></h1></div>
				<div class="row featurette"
				>
				<div class="col-md-7 order-md-1 edit" id='editor4'>
					<h3 class="featurette-heading">店長推薦<br/>
 						<span class="text-muted">XCITING S 400，展現運動跑旅新主張</span>
					</h3>
					<p class="text-right">2018/07/27</p>
					<p class="lead text-justify">XCITING 400車系自2013年首度上市以來，即以「Sport Touring」為產品定位，
					強調都會騎乘操控靈活性、同級車最佳馬力以及引擎平順安靜輸出等多重優勢，不僅廣受消費者的好評與喜愛，更迅速累積極佳的口碑，
					成為KYMCO旗下的主力黃牌旗艦機種。而這次在「2018國際重型機車展」登場的全新XCITING S 400，以全面精進之姿展現運動跑旅新主張！
					延續XCITING車系所強調的運動性能與靈活特性，XCITINGS 400具有更迷人的外型與科技配備。
					XCITING S 400動力經過重新調校後，可輸出26.5kW最大馬力與38.1Nm扭力輸出，為呼應跑旅性格在性能輸出表現上更線性且綿密，
					同時提供騎乘的極佳靈敏反應與樂趣。</p>
				</div>
				<div class="col-md-5 order-md-2 edit" id='editor5' style="overflow: hidden;">
					<img class="featurette-image"
						src="https://images.pexels.com/photos/52538/motorcycle-motor-cylinder-technology-52538.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"
						style="object-fit: cover; margin-left: -45%;" height='500px'>
				</div>
			</div>
			<br/><br/>
			<div class="row featurette">
				<div class="col-md-7 order-md-2 edit" id='editor6'>
					<h3 class="featurette-heading">新車上架<br/>
						<span class="text-muted">給您最舒適的體驗</span>
					</h3>
					<p class="text-right">2018/10/03</p>
					<p class="lead text-justify">Honda Taiwan為了持續實現「Be Your Wing」的品牌精神，
					，以多款大型二輪商品與日本原廠的服務建構二輪事業，於全國具有5個大型二輪銷售據點，
					並以為顧客建構完善的二輪環境為核心理念推動「6S」服務，導入多款大型二輪商品，
					更於2018年引進與全球同步之3款全新機種：GOLDWING、CRF1000L Africa Twin、CB1000R，擴充原有產品線級距，
					滿足更多消費者需求，獲得市場好評。為持續符合消費者對於Honda Taiwan的期望，
					3款機型之2019式樣將以全新顏色與消費者見面， 頂級巡航車款GOLDWING導入全新「珍珠白」、
					CRF1000L Africa Twin則導入「經典紅」、「躍動藍」2種車色、CB1000R則維持原有之黑、
					紅兩色車款，新增「質感銀」車色令消費者有更多選擇。3款機種新色車型即日起開始預接活動，有興趣的顧客可前往全國5大據點來店賞車試乘！！</p>
				</div>
				<div class="col-md-5 order-md-1 edit" id='editor7' style="overflow: hidden;">
					<img class="featurette-image"
						src="https://moto.honda-taiwan.com.tw/Uploads/images/2019%20CB1000R%20%e8%b3%aa%e6%84%9f%e9%8a%80.jpg"
						style="object-fit: cover; margin-left: -25%;" height='500px'>
				</div>
			</div>
			<div class="text-center my-5"><button type='submit' class='btn btn-outline-secondary algin-center' id='submit'>確認修改</button></div>
      	</div>
      	
			<script>
				var num = $('.edit').length;

// 				$(document).ready(function(){
// 			    	$.ajax({
// 			            type: "get",
// 			            url: "queryAllWebContent",
// 			            contentType: "application/json; charset=utf-8",
// 			            success: function (response) {
// // 			               alert(response[0].webElements+ +response[0].webContent);
// 						   for(i=0; i<num; i++){ $('#'+response[i].webElements).empty().append(response[i].webContent);}
// 			            }
// 			        });	
// 				});	
				
// 				for(i=1; i<=num; i++){
// 					$("#editor"+i).on('click',function(){
// 						alert(this.id);
// 						InlineEditor
// 				        .create( document.querySelector( '#editor'+i ) )
// 				        .then( newEditor => {
// 						   this.id = newEditor;
// 						})
// 						.catch( error => {
// 						   console.error( error );
// 						});
// 					});
// 				}
				$('.edit').on('click',function(){
					InlineEditor
			        .create( document.querySelector('#editor1'))
			        .then( newEditor => {
			        	editor1 = newEditor;
					})
					.catch( error => {
					   console.error( error );
					});
				});
				
				$(".edit").on('click',function(){	
				    InlineEditor
				        .create( document.querySelector( '#editor2' ) )
				        .then( newEditor => {
						   editor2 = newEditor;
						})
						.catch( error => {
						   console.error( error );
						});
				});
				
				$(".edit").on('click',function(){
				    InlineEditor
				        .create( document.querySelector( '#editor3' ) )
				        .then( newEditor => {
						   editor3 = newEditor;
						})
						.catch( error => {
						   console.error( error );
						});
				});
				
				$(".edit").on('click',function(){
				    InlineEditor
				        .create( document.querySelector( '#editor4' ) )
				        .then( newEditor => {
						   editor4 = newEditor;
						})
						.catch( error => {
						   console.error( error );
						});
				});
				$(".edit").on('click',function(){
				    InlineEditor
				        .create( document.querySelector( '#editor5' ),{
				        	cloudServices: {
				                tokenUrl: 'https://35787.cke-cs.com/token/dev/dnS4I8MnGfdbLOrQ6FfiF8umIoZkjagJzRiAtYeOTFx3lQBq4Anpda5Erjey',
				                uploadUrl: 'https://35787.cke-cs.com/easyimage/upload/'
				            }
				        })
				        .then( newEditor => {
						   editor5 = newEditor;
						})
						.catch( error => {
						   console.error( error );
						});
				});
				$(".edit").on('click',function(){
				    InlineEditor
				        .create( document.querySelector( '#editor6' ) )
				        .then( newEditor => {
						   editor6 = newEditor;
						})
						.catch( error => {
						   console.error( error );
						});
				});
				$(".edit").on('click',function(){
				    InlineEditor
				        .create( document.querySelector( '#editor7' ),{
				        	cloudServices: {
				                tokenUrl: 'https://35787.cke-cs.com/token/dev/dnS4I8MnGfdbLOrQ6FfiF8umIoZkjagJzRiAtYeOTFx3lQBq4Anpda5Erjey',
				                uploadUrl: 'https://35787.cke-cs.com/easyimage/upload/'
				            }
				        })
				        .then( newEditor => {
						   editor7 = newEditor;
						})
						.catch( error => {
						   console.error( error );
						});
				});
			</script>
			<script>		   
// 				for(i=0; i<num; i++){
// 					editor = "editor"+i;
// 				    InlineEditor.create(document.querySelector('#editor'+i))
// 				        .then( newEditor => {
// 				        	editor.val() = newEditor;
// 						})
// 						.catch( error => {
// 						   console.error( error );
// 					});
// 				}

			    
// 			    document.querySelector( '#submit' ).addEventListener( 'click', () => {
			    $('#submit').click(function(e){
			    	
			    
// 			    	for(i=0; i<num; i++){
// 			    		const editorData = editor.getData();
				      const editorData1 = editor1.getData();
				      const editorData2 = editor2.getData();
				      const editorData3 = editor3.getData();
				      const editorData4 = editor4.getData();
				      const editorData5 = editor5.getData();
				      const editorData6 = editor6.getData();
				      const editorData7 = editor7.getData();
// 				        alert("editorData0="+editorData1+" editorData1="+editorData2+" editorData2="+editorData3);
// 			    	}
// 			    	var editor = {"editor1": editorData1,"editor2": editorData2,"editor3": editorData3};
					var editor =[{"webElements": $('.edit').get(0).id , "webContent":editorData1, "webSrc":""},
								 {"webElements": $('.edit').get(1).id , "webContent":editorData2, "webSrc":""},
								 {"webElements": $('.edit').get(2).id , "webContent":editorData3, "webSrc":""},
								 {"webElements": $('.edit').get(3).id , "webContent":editorData4, "webSrc":""},
								 {"webElements": $('.edit').get(4).id , "webContent":editorData5, "webSrc":""},
								 {"webElements": $('.edit').get(5).id , "webContent":editorData6, "webSrc":""},
								 {"webElements": $('.edit').get(6).id , "webContent":editorData7, "webSrc":""}]
// 					alert(editor[0].webElements + editor[0].webContent);
			    	alert(editor)
					$.ajax({ 
			    		type: "Post",
			    		url: "insertWebContent",
			    		data: JSON.stringify(editor),
			    		contentType: "application/json; charset=utf-8",
			    		success: function (response) {
			    			alert(response);
			    		},
			    		error:function(responseerror){
			    			alert(responseerror.responseText)
			    			window.location.assign ("error.html");
			    		}
			    	});
			    });
// 			    });
			</script>
      	
      	<!-- Sticky Footer -->
        <footer class="sticky-footer">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright © Motorcycle 2018</span>
            </div>
          </div>
        </footer>

      </div>
      <!-- /.content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header text-center">
            <h5 class="modal-title" id="exampleModalLabel">確定要登出?</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body text-center py-2">登出前<br/>請確認儲存了所有修改資料<br/>否則將會發生不可預期的錯誤!!!!</div>
          <div class="modal-footer">
            <button class="btn btn-outline-secondary" type="button" data-dismiss="modal">取消</button>
            <a class="btn btn-outline-secondary" href="index.html">登出</a>
          </div>
        </div>
      </div>
    </div>
    
    <div w3-include-html="chatbox.html" class="d-none" id="chatbox"></div>
	<script>includeHTML();</script>
  </body>
</html>